name: ZenPacks.community.HPMSA

zProperties:
  zHPMSAControllers:
    category: HP MSA
    type: lines

  zHPMSAUser:
    category: HP MSA
    type: string

  zHPMSAPassword:
    category: HP MSA
    type: password

  zHPMSASecureConnection:
    category: HP MSA
    type: boolean
    default: true

device_classes:
  /Storage/HP/MSA:
    remove: true
    zProperties:
      zPythonClass: ZenPacks.community.HPMSA.HPMSA
      zSnmpMonitorIgnore: true
      zPingMonitorIgnore: true
      zCollectorPlugins:
        - community.api.hpmsa
      zDeviceTemplates:
        - HPMSAEvents

    templates:
      HPMSAEvents:
        description: HP MSA Global Events Template.
        targetPythonClass: ZenPacks.community.HPMSA.HPMSA
        datasources:
          events:
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Events
            cycletime: "300"

      Enclosure:
        description: HP MSA Enclosure Template.
        targetPythonClass: ZenPacks.community.HPMSA.Enclosure
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      PowerSupp:
        description: HP MSA Power Supply Template.
        targetPythonClass: ZenPacks.community.HPMSA.Powersupp
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      Controller:
        description: HP MSA Controller Template.
        targetPythonClass: ZenPacks.community.HPMSA.Controller
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      HardDisk:
        description: HP MSA HDD Template.
        targetPythonClass: ZenPacks.community.HPMSA.HardDisk
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      HostPort:
        description: HP MSA HostPort Template.
        targetPythonClass: ZenPacks.community.HPMSA.HostPort
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      ExpansionPort:
        description: HP MSA Export Template.
        targetPythonClass: ZenPacks.community.HPMSA.Export
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      ManagementPort:
        description: HP MSA Network Port Template.
        targetPythonClass: ZenPacks.community.HPMSA.Nwport
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      IOModule:
        description: HP MSA In/Out Module Template.
        targetPythonClass: ZenPacks.community.HPMSA.Iomod
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      CompactFlash:
        description: HP MSA Compact Flash Module Template.
        targetPythonClass: ZenPacks.community.HPMSA.Compflash
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      VirtualDisk:
        description: HP MSA Virtual Disk Template.
        targetPythonClass: ZenPacks.community.HPMSA.Virtualdisk
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

      Volume:
        description: HP MSA Volume Template.
        targetPythonClass: ZenPacks.community.HPMSA.Volume
        datasources:
          conditions:
            enabled: True
            type: Python
            plugin_classname: ZenPacks.community.HPMSA.dsplugins.Conditions
            cycletime: "300"

classes:
  HPMSA:
    base: [zenpacklib.Device]
    label: HP MSA Device
    properties:
      product-id:
        label: MSA Version

  Enclosure:
    base: [zenpacklib.Component]
    label: Enclosure
    order: 10
    properties:
      enclosure-wwn:
        label: WWN
      description:
        label: Description
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  PowerSupp:
    base: [zenpacklib.Component]
    label: Power Supp
    order: 12
    properties:
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  Controller:
    base: [zenpacklib.Component]
    label: Controller
    order: 11
    properties:
      wwn:
        label: WWN
      description:
        label: Description
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  HardDisk:
    base: [zenpacklib.Component]
    label: Hard Disk
    order: 13
    properties:
      size:
        label: Size
      usage:
        label: Usage
      health:
        label: Health
        order: 85

  HostPort:
    base: [zenpacklib.Component]
    label: Host Port
    order: 19
    properties:
      port-type:
        label: Type
      actual-speed:
        label: Speed
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  ExpansionPort:
    base: [zenpacklib.Component]
    label: Expansion Port
    order: 18
    properties:
      sas-port-type:
        label: Type
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  ManagementPort:
    base: [zenpacklib.Component]
    label: Management Port
    order: 17
    properties:
      ip-address:
        label: IP
      link-speed:
        label: Speed
      health:
        label: Health
        order: 85

  InoutModule:
    base: [zenpacklib.Component]
    label: IO Module
    order: 16
    properties:
      description:
        label: Description
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  CompactFlash:
    base: [zenpacklib.Component]
    label: Compact Flash
    order: 20
    properties:
      cache-flush:
        label: Cache Flush
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  VirtualDisk:
    base: [zenpacklib.Component]
    label: Virtual Disk
    order: 14
    properties:
      size:
        label: Size
      raidtype:
        label: RAID
      status:
        label: Status
        order: 80
      health:
        label: Health
        order: 85

  Volume:
    base: [zenpacklib.Component]
    label: Volume
    order: 15
    properties:
      size:
        label: Size
      owner:
        label: Current Owner
      health:
        label: Health
        order: 85

class_relationships:
  - HPMSA 1:MC Enclosure
  - HPMSA 1:MC Controller
  - HPMSA 1:MC VirtualDisk
  - HPMSA 1:MC Volume
  - Enclosure 1:MC ExpansionPort
  - Enclosure 1:MC PowerSupp
  - Enclosure 1:MC HardDisk
  - Enclosure 1:MC InoutModule
  - Controller 1:MC ManagementPort
  - Controller 1:MC HostPort
  - Controller 1:MC CompactFlash
